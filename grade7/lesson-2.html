<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Grade 7 • Unit 1 • Lesson 2 — Opposites (Positive & Negative)</title>

<!-- Fonts & Tailwind -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>

<style>
  :root{ --maroon:#6C1D45; --gold:#C7A34F; --dark:#2C2C2E; --light:#F5F5F5; --accent:#E8D5B7; }
  html,body{height:100%;background:#2d3748;color:#111;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial}
  #deck{position:relative;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;padding:10px}
  #slides{position:relative;width:100%;max-width:1280px;aspect-ratio:16/9;background:#fff;box-shadow:0 14px 36px rgba(0,0,0,.35);overflow:hidden;border-radius:18px}
  .slide{position:absolute;inset:0;padding:3.5%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;opacity:0;transform:translateY(14px) scale(.985);transition:.55s ease;pointer-events:none}
  .slide.active{opacity:1;transform:none;pointer-events:auto}
  .bg-maroon{background-color:var(--maroon)} .text-maroon{color:var(--maroon)} .text-gold{color:var(--gold)}
  .banner{width:100%;height:140px;background:#fff url('../assets/qla_banner.png') center/contain no-repeat;border-bottom:3px solid var(--gold);border-radius:10px}
  .card{border:1px solid #e5e7eb;border-radius:14px;background:#fafafa}
  .chip{display:inline-flex;align-items:center;gap:.5rem;background:rgba(0,0,0,.05);border-radius:9999px;padding:.35rem .75rem;cursor:pointer}
  .chip:hover{outline:2px solid var(--gold)}
  .btn{padding:.55rem 1rem;border-radius:999px;border:1px solid #e5e7eb;background:#fff;font-weight:700}
  .btn.maroon{background:var(--maroon);color:#fff;border-color:var(--maroon)}
  .btn:hover{filter:brightness(0.98)}
  #controls{position:fixed;bottom:18px;left:50%;transform:translateX(-50%);display:flex;align-items:center;gap:.5rem;background:rgba(0,0,0,.55);padding:.4rem .6rem;border-radius:999px;z-index:20;backdrop-filter:blur(6px)}
  #controls button{width:42px;height:42px;border-radius:999px;border:none;background:#fff;cursor:pointer;font-weight:700}
  #controls button:hover{transform:scale(1.06)}
  #counter{color:#fff;font-weight:700;min-width:84px;text-align:center}
  #progress{position:fixed;left:0;bottom:0;height:5px;width:0;background:var(--gold);z-index:30;transition:width .35s ease}
  #fsHint{position:absolute;top:10px;right:12px;color:#fff;background:rgba(0,0,0,.35);padding:.25rem .5rem;border-radius:8px;font-size:.8rem}

  /* Glossary popover */
  #pop{position:fixed;inset:auto auto 20px 20px;max-width:min(560px,90vw);background:#fff;border:2px solid var(--gold);border-radius:12px;box-shadow:0 12px 28px rgba(0,0,0,.25);padding:14px 16px;z-index:40;display:none;text-align:left}
  #pop strong{color:var(--maroon)} #pop .close{float:right;color:#666;cursor:pointer;font-weight:800}

  /* Number line */
  .nl-wrap{width:100%;max-width:900px}
  canvas.nline{width:100%;height:140px;border-radius:12px;background:linear-gradient(180deg,#fff,#fafafa);border:2px solid #ececec}

  /* Sortable helpers */
  .sortable li{user-select:none} .sortable .dragging{opacity:.5}

  /* Confetti */
  .confetti{position:fixed;pointer-events:none;z-index:50}
</style>
</head>
<body>

<div id="deck" aria-live="polite">
  <div id="slides" class="relative">
    <div id="fsHint">Press <strong>F</strong> for fullscreen</div>

    <!-- 0 • Title -->
    <section class="slide active bg-maroon text-white">
      <div class="w-full h-16 banner mb-6 rounded-md" aria-label="QLA Partner Banner"></div>
      <div class="flex items-center gap-8">
        <img src="../assets/qla_logo.png" alt="QLA Logo" class="h-28 w-auto" onerror="this.style.display='none'"/>
        <div class="text-left">
          <h1 class="text-5xl md:text-6xl font-extrabold tracking-tight">Unit 1 — The Number System</h1>
          <p class="text-gold text-2xl md:text-3xl mt-2 font-semibold">Lesson 2: Opposites (Positive & Negative)</p>
          <p class="mt-2 text-lg">Qatar Leadership Academy — Mr. Mohammad Abu‑Ghuwaleh</p>
        </div>
      </div>
      <div class="absolute bottom-6 text-sm text-gray-100">Member of Qatar Foundation</div>
    </section>

    <!-- 1 • LOs + Keywords -->
    <section class="slide">
      <h2 class="text-4xl font-extrabold text-maroon mb-2">Learning Objectives & Keywords</h2>
      <div class="grid md:grid-cols-2 gap-6 text-left max-w-5xl">
        <div class="card p-5">
          <h3 class="text-2xl font-bold text-maroon mb-1">Learning Objectives</h3>
          <ul class="list-disc list-inside space-y-1 text-lg">
            <li>Explain and identify <span class="chip" data-key="opposite">opposites</span> (additive inverses) and relate them to <span class="chip" data-key="abs">distance from 0</span>.</li>
            <li>Translate real‑world statements into signed integers and determine their <span class="chip" data-key="opposite">opposites</span>.</li>
            <li>Order and compare integers/decimals using a <span class="chip" data-key="numberline">number line</span> and inequality symbols.</li>
          </ul>
        </div>
        <div class="card p-5">
          <h3 class="text-2xl font-bold text-maroon mb-1">Keywords (tap for definitions)</h3>
          <div class="flex flex-wrap gap-2 text-lg">
            <span class="chip" data-key="opposite">opposite</span>
            <span class="chip" data-key="inverse">additive inverse</span>
            <span class="chip" data-key="positive">positive</span>
            <span class="chip" data-key="negative">negative</span>
            <span class="chip" data-key="abs">absolute value |x|</span>
            <span class="chip" data-key="compare">&lt;  &gt;  =</span>
          </div>
        </div>
      </div>
    </section>

    <!-- 2 • Explanations + Opposites Explorer -->
    <section id="oppoSlide" class="slide">
      <h2 class="text-4xl font-extrabold text-maroon mb-1">Opposites & Absolute Value</h2>
      <div class="grid lg:grid-cols-2 gap-6 text-left max-w-5xl">
        <div class="card p-5">
          <h3 class="text-xl font-bold text-maroon">Idea</h3>
          <p class="mt-2">Two numbers are <strong>opposites</strong> if they are the same distance from 0 on the number line, in opposite directions. They add to zero.</p>
          <div class="mt-3 grid gap-2">
            <div class="chip"><strong>Example:</strong> +5 and −5 → sum 0; |+5|=|−5|=5</div>
            <div class="chip"><strong>Context:</strong> “a loss of $1250” → −1250; opposite “a gain of $1250” → +1250</div>
            <div class="chip"><strong>Distance:</strong> distance between a and b is |a−b|</div>
          </div>
        </div>
        <div class="card p-5">
          <h3 class="text-xl font-bold text-maroon mb-1">Opposites Explorer</h3>
          <div class="nl-wrap"><canvas id="oppoLine" class="nline" aria-label="Interactive number line"></canvas></div>
          <div class="mt-3 flex flex-wrap items-center gap-2 text-sm">
            <span class="chip"><b>p</b>=<span id="pVal">–</span></span>
            <span class="chip"><b>−p</b>=<span id="negPVal">–</span></span>
            <span class="chip">sum=<span id="sumVal">–</span></span>
            <span class="chip">|p|=<span id="absVal">–</span></span>
            <button id="randP" class="btn">Randomize</button>
            <button id="snapGrid" class="btn">Snap to tenths</button>
            <button id="resetP" class="btn">Reset</button>
          </div>
          <p class="text-xs text-gray-500 mt-2">Drag the maroon point; gold shows the opposite.</p>
        </div>
      </div>
    </section>

    <!-- 3 • Q1 -->
    <section class="slide">
      <h2 class="text-3xl font-extrabold text-maroon mb-2">Q1 — From Words to Integers & Opposites</h2>
      <p class="text-gray-600 mb-2">Enter the number (with sign), choose the opposite word, and type the opposite number.</p>
      <div id="q1Area" class="w-full max-w-5xl grid gap-3"></div>
      <div class="mt-3 flex gap-2">
        <button id="checkQ1" class="btn maroon">Check Q1</button>
        <button id="resetQ1" class="btn">Reset</button>
      </div>
      <div id="q1Fb" class="mt-2 h-6 font-semibold"></div>
    </section>

    <!-- 4 • Q2 -->
    <section class="slide">
      <h2 class="text-3xl font-extrabold text-maroon mb-2">Q2 — Write an Integer for Each Description</h2>
      <div id="q2Area" class="w-full max-w-5xl grid gap-3"></div>
      <div class="mt-3 flex gap-2">
        <button id="checkQ2" class="btn maroon">Check Q2</button>
        <button id="resetQ2" class="btn">Reset</button>
      </div>
      <div id="q2Fb" class="mt-2 h-6 font-semibold"></div>
    </section>

    <!-- 5 • Order & Compare -->
    <section class="slide">
      <h2 class="text-3xl font-extrabold text-maroon mb-2">Order & Compare</h2>
      <div class="grid md:grid-cols-2 gap-6 text-left max-w-5xl">
        <div class="card p-5">
          <h3 class="text-xl font-bold text-maroon">Order (Ascending / Descending)</h3>
          <div class="mb-1 font-semibold">Ascending: −5, 3, −7, 1, −3</div>
          <ul id="ascList" class="sortable space-y-2"></ul>
          <div class="mt-2 font-semibold">Descending: 4, −7, −3, 9, −8</div>
          <ul id="descList" class="sortable space-y-2"></ul>
          <div class="mt-2 flex gap-2">
            <button id="checkOrder" class="btn maroon">Check</button>
            <button id="resetOrder" class="btn">Reset</button>
          </div>
          <div id="orderFb" class="mt-2 h-6 font-semibold"></div>
        </div>
        <div class="card p-5">
          <h3 class="text-xl font-bold text-maroon">Compare (&lt;  &gt;)</h3>
          <div class="grid gap-3 text-2xl font-bold">
            <div class="flex items-center gap-3">
              <span>−1</span>
              <div class="flex gap-2">
                <button class="btn cmp" data-pair="a" data-op="<">&lt;</button>
                <button class="btn cmp" data-pair="a" data-op=">">&gt;</button>
              </div>
              <span>7</span>
            </div>
            <div class="flex items-center gap-3">
              <span>6</span>
              <div class="flex gap-2">
                <button class="btn cmp" data-pair="b" data-op="<">&lt;</button>
                <button class="btn cmp" data-pair="b" data-op=">">&gt;</button>
              </div>
              <span>2</span>
            </div>
            <div class="flex items-center gap-3">
              <span>−6</span>
              <div class="flex gap-2">
                <button class="btn cmp" data-pair="c" data-op="<">&lt;</button>
                <button class="btn cmp" data-pair="c" data-op=">">&gt;</button>
              </div>
              <span>0</span>
            </div>
          </div>
          <div id="cmpFb" class="mt-3 h-6 font-semibold"></div>
        </div>
      </div>
    </section>

    <!-- 6 • Mini‑Challenge -->
    <section class="slide">
      <h2 class="text-3xl font-extrabold text-maroon mb-2">Mini‑Challenge: Signs from Situations</h2>
      <p class="text-gray-600 mb-3">Decide <strong>positive</strong> or <strong>negative</strong> (and type the integer). 5 quick items.</p>
      <div id="miniSituations" class="w-full max-w-4xl grid md:grid-cols-2 gap-3"></div>
      <div class="mt-3 flex gap-2">
        <button id="checkMini" class="btn maroon">Check</button>
        <button id="newMini" class="btn">New Set</button>
      </div>
      <div id="miniFb" class="mt-2 h-6 font-semibold"></div>
    </section>

    <!-- 7 • Exit -->
    <section class="slide">
      <h2 class="text-4xl font-extrabold text-maroon mb-2">Exit Ticket & Next</h2>
      <div class="grid md:grid-cols-2 gap-6 text-left max-w-5xl">
        <div class="card p-5">
          <h3 class="text-xl font-bold text-maroon">Reflect (3–2–1)</h3>
          <ul class="list-disc list-inside">
            <li>3 ideas about <strong>opposites</strong> or <strong>comparing numbers</strong></li>
            <li>2 real‑life statements you can translate into integers</li>
            <li>1 question you still have</li>
          </ul>
        </div>
        <div class="card p-5">
          <h3 class="text-xl font-bold text-maroon">Up Next</h3>
          <p>The <strong>diagnostic</strong> will be announced later (not today). Then we start operations on rational numbers.</p>
        </div>
      </div>
      <div class="absolute bottom-4 left-1/2 -translate-x-1/2 w-[88%] h-[120px] banner rounded-md"></div>
    </section>
  </div>
</div>

<!-- Controls -->
<div id="controls" role="group" aria-label="Slideshow controls">
  <button id="prev" title="Previous (←)">&laquo;</button>
  <button id="fs" title="Toggle Fullscreen (F)">⤢</button>
  <div id="counter">1 / 8</div>
  <button id="next" title="Next (→)">&raquo;</button>
</div>
<div id="progress"></div>

<!-- Glossary popover -->
<div id="pop" role="dialog" aria-modal="true" aria-live="polite">
  <span class="close" title="Close">✕</span>
  <div id="popBody"></div>
</div>

<script>
/* ---------- Deck Navigation & Fullscreen ---------- */
(function(){
  const slides=[...document.querySelectorAll('.slide')];
  const prev=document.getElementById('prev'), next=document.getElementById('next');
  const counter=document.getElementById('counter'), progress=document.getElementById('progress');
  const fsBtn=document.getElementById('fs'); let i=0;
  function show(k){ i=(k+slides.length)%slides.length;
    slides.forEach((s,idx)=>s.classList.toggle('active', idx===i));
    counter.textContent=(i+1)+' / '+slides.length;
    progress.style.width=((i+1)/slides.length*100)+'%';
    const id=slides[i].id||''; if(id==='oppoSlide') drawOpposites();
  }
  prev.addEventListener('click',()=>show(i-1));
  next.addEventListener('click',()=>show(i+1));
  document.addEventListener('keydown',e=>{
    if(e.key==='ArrowRight')show(i+1);
    if(e.key==='ArrowLeft')show(i-1);
    if(e.key.toLowerCase()==='f')toggleFS();
  });
  function toggleFS(){
    const el=document.getElementById('slides');
    if(!document.fullscreenElement){(el.requestFullscreen||el.webkitRequestFullscreen||el.msRequestFullscreen).call(el);}
    else{(document.exitFullscreen||document.webkitExitFullscreen||document.msExitFullscreen).call(document);}
  }
  fsBtn.addEventListener('click',toggleFS);

  /* Utilities */
  const $=id=>document.getElementById(id);
  const gcd=(a,b)=>{a=Math.abs(a);b=Math.abs(b);while(b){[a,b]=[b,a%b]}return a||1}
  const simp=(n,d)=>{let g=gcd(n,d); d<0&&(g=-g); return [n/g,d/g];}
  function confetti(x=innerWidth/2,y=innerHeight/2){
    for(let k=0;k<16;k++){const d=document.createElement('div');d.className='confetti';d.style.left=x+'px';d.style.top=y+'px';
      d.style.width='8px';d.style.height='8px';d.style.background=['#6C1D45','#C7A34F','#E8D5B7','#8a3d64'][k%4];
      document.body.appendChild(d);const dx=(Math.random()*2-1)*240,dy=(Math.random()*-1-0.2)*300,rot=(Math.random()*720);
      d.animate([{transform:'translate(0,0) rotate(0deg)'},{transform:`translate(${dx}px,${dy}px) rotate(${rot}deg)`,opacity:0}],{duration:900+Math.random()*700,easing:'cubic-bezier(.2,.8,.2,1)'}).onfinish=()=>d.remove();}
  }

  /* Glossary chips */
  const GLOS={
    opposite:'<strong>Opposites</strong> (additive inverses) are numbers the same distance from 0 in opposite directions; they sum to 0.',
    inverse:'<strong>Additive inverse</strong> of <em>p</em> is <em>−p</em>. Together they make 0: p + (−p) = 0.',
    abs:'<strong>Absolute value</strong> |x| is the distance of x from 0. Always non‑negative.',
    numberline:'A <strong>number line</strong> shows numbers in order; distance represents absolute value and direction represents sign.',
    positive:'<strong>Positive</strong> means greater than 0.',
    negative:'<strong>Negative</strong> means less than 0.',
    compare:'Use <strong>&lt;, &gt;, =</strong> to compare two numbers. On a number line, left is less; right is greater.'
  };
  const POP=$('pop'), POP_BODY=$('popBody');
  function showPop(html,anchor){ POP_BODY.innerHTML=html; POP.style.display='block';
    if(anchor){const r=anchor.getBoundingClientRect(); POP.style.left=Math.min(r.left, innerWidth-POP.offsetWidth-20)+'px'; POP.style.bottom=(innerHeight-r.top+10)+'px';}
    else{POP.style.left='20px'; POP.style.bottom='20px';}
  }
  POP.querySelector('.close').addEventListener('click',()=>POP.style.display='none');
  document.addEventListener('click',e=>{const el=e.target.closest('.chip[data-key]'); if(el){const key=el.dataset.key; if(GLOS[key]) showPop(GLOS[key],el);}});

  /* Opposites Explorer */
  const oppoCanvas=$('oppoLine'); const pDisp=$('pVal'), negPDisp=$('negPVal'), sumDisp=$('sumVal'), absDisp=$('absVal');
  const randBtn=$('randP'), resetBtn=$('resetP'), snapBtn=$('snapGrid');
  let NL={min:-10,max:10,p:-3.2,dragging:false,snap:false};
  const map=(x,a1,a2,b1,b2)=>b1+(x-a1)*(b2-b1)/(a2-a1);
  const unmap=(px,a1,a2,b1,b2)=>a1+(px-b1)*(a2-a1)/(b2-b1);
  function drawOpposites(){
    if(!oppoCanvas) return;
    const c=oppoCanvas.getContext('2d');
    oppoCanvas.width=oppoCanvas.clientWidth*devicePixelRatio;
    oppoCanvas.height=oppoCanvas.clientHeight*devicePixelRatio;
    c.scale(devicePixelRatio,devicePixelRatio);
    c.clearRect(0,0,oppoCanvas.clientWidth,oppoCanvas.clientHeight);
    const m=24, y=oppoCanvas.clientHeight/2;
    c.lineWidth=2; c.strokeStyle='#6C1D45'; c.beginPath(); c.moveTo(m,y); c.lineTo(oppoCanvas.clientWidth-m,y); c.stroke();
    for(let t=NL.min;t<=NL.max;t++){const x=map(t,NL.min,NL.max,m,oppoCanvas.clientWidth-m);
      c.beginPath(); c.moveTo(x,y-8); c.lineTo(x,y+8); c.stroke();
      if(t%2===0){c.fillStyle='#555'; c.font='12px Inter'; c.fillText(String(t),x-6,y+22);}
    }
    const px=map(NL.p,NL.min,NL.max,m,oppoCanvas.clientWidth-m);
    const q=-NL.p, qx=map(q,NL.min,NL.max,m,oppoCanvas.clientWidth-m);
    c.strokeStyle='#C7A34F'; c.lineWidth=4; c.beginPath(); c.moveTo(px,y); c.lineTo(qx,y); c.stroke();
    c.fillStyle='#6C1D45'; c.beginPath(); c.arc(px,y,9,0,Math.PI*2); c.fill();
    c.fillStyle='#C7A34F'; c.beginPath(); c.arc(qx,y,9,0,Math.PI*2); c.fill();
    pDisp.textContent=NL.p.toFixed(2); negPDisp.textContent=(-NL.p).toFixed(2);
    sumDisp.textContent=(NL.p+(-NL.p)).toFixed(0); absDisp.textContent=Math.abs(NL.p).toFixed(2);
  }
  function handleOppoPointer(e){
    const r=oppoCanvas.getBoundingClientRect(); const clientX=(e.touches?e.touches[0].clientX:e.clientX);
    let val=unmap(clientX-r.left,NL.min,NL.max,24,oppoCanvas.clientWidth-24);
    if(NL.snap) val=Math.round(val*10)/10;
    NL.p=Math.max(NL.min,Math.min(NL.max,val)); drawOpposites();
  }
  if(oppoCanvas){
    oppoCanvas.addEventListener('mousedown',e=>{NL.dragging=true;handleOppoPointer(e)});
    window.addEventListener('mousemove',e=>{if(NL.dragging)handleOppoPointer(e)});
    window.addEventListener('mouseup',()=>NL.dragging=false);
    oppoCanvas.addEventListener('touchstart',e=>{NL.dragging=true;handleOppoPointer(e)},{passive:false});
    oppoCanvas.addEventListener('touchmove',e=>{if(NL.dragging)handleOppoPointer(e)},{passive:false});
    oppoCanvas.addEventListener('touchend',()=>NL.dragging=false);
    randBtn?.addEventListener('click',()=>{NL.p=+((Math.random()*20-10).toFixed(2)); drawOpposites();});
    resetBtn?.addEventListener('click',()=>{NL.p=-3.2; drawOpposites();});
    snapBtn?.addEventListener('click',()=>{NL.snap=!NL.snap; snapBtn.classList.toggle('ring-2'); drawOpposites();});
  }

  /* Q1 / Q2 data & checkers */
  const q1Rows=[
    {statement:'Winning by 5 goals', value:+5, opps:['Winning','Losing','Draw'], answerOpp:'Losing'},
    {statement:'A clock is 3 min slow', value:-3, opps:['fast','slow','on-time'], answerOpp:'fast'},
    {statement:'A loss of $1250', value:-1250, opps:['loss','gain','refund'], answerOpp:'gain'},
    {statement:'200 m above sea level', value:+200, opps:['above','below','at'], answerOpp:'below'},
    {statement:'A decrease of $100', value:-100, opps:['increase','decrease','equal'], answerOpp:'increase'}
  ];
  function renderQ1(){
    const area=$('q1Area'); area.innerHTML='';
    q1Rows.forEach((row,idx)=>{
      const div=document.createElement('div'); div.className='card p-4 text-left';
      div.innerHTML=`<div class="font-semibold text-maroon">Q1.${'ABCDE'[idx]}</div>
        <div class="mt-1">${row.statement}</div>
        <div class="mt-2 grid sm:grid-cols-4 gap-2 items-center">
          <div><label class="text-sm">Number</label><input class="q1num px-2 py-1 rounded border w-full" data-i="${idx}" placeholder="e.g., -1250"></div>
          <div><label class="text-sm">Opposite word</label>
            <select class="q1opp border rounded px-2 py-1 w-full" data-i="${idx}">
              ${row.opps.map(o=>`<option value="${o}">${o}</option>`).join('')}
            </select>
          </div>
          <div><label class="text-sm">Opposite number</label><input class="q1oppnum px-2 py-1 rounded border w-full" data-i="${idx}" placeholder="e.g., +1250"></div>
        </div>`;
      area.appendChild(div);
    });
  }
  renderQ1();
  const parseNum=s=>s?Number(s.replace('−','-')):NaN;
  $('checkQ1').addEventListener('click',()=>{
    let total=0, correct=0;
    $('q1Area').querySelectorAll('.card').forEach((card,idx)=>{
      const row=q1Rows[idx];
      const n=card.querySelector('.q1num'); total++; if(parseNum(n.value)===row.value){n.style.borderColor='#22c55e';correct++;}else{n.style.borderColor='#ef4444';}
      const opp=card.querySelector('.q1opp').value; total++; if(opp===row.answerOpp) correct++;
      const n2=card.querySelector('.q1oppnum'); total++; if(parseNum(n2.value)===-row.value){n2.style.borderColor='#22c55e';correct++;}else{n2.style.borderColor='#ef4444';}
    });
    $('q1Fb').textContent=(correct===total)?'✅ All correct!':`Score: ${correct}/${total} — corrections highlighted`;
    if(correct===total) confetti();
  });
  $('resetQ1').addEventListener('click',renderQ1);

  const q2Rows=[
    {statement:'A debit of $40', value:-40},
    {statement:'A deposit of $225', value:+225},
    {statement:'14,000 feet above sea level', value:+14000},
    {statement:'A temperature increase of 40°F', value:+40},
    {statement:'A withdrawal of $225', value:-225},
    {statement:'14,000 feet below sea level', value:-14000},
  ];
  function renderQ2(){
    const area=$('q2Area'); area.innerHTML='';
    q2Rows.forEach((row,idx)=>{
      const div=document.createElement('div'); div.className='card p-4 text-left';
      div.innerHTML=`<div class="font-semibold text-maroon">Q2.${'abcdef'[idx]}</div>
        <div class="mt-1">${row.statement}</div>
        <div class="mt-2"><label class="text-sm">Integer:</label>
        <input class="q2num px-2 py-1 rounded border w-32" data-i="${idx}" placeholder="e.g., -40"></div>`;
      area.appendChild(div);
    });
  }
  renderQ2();
  $('checkQ2').addEventListener('click',()=>{
    let total=0, correct=0;
    $('q2Area').querySelectorAll('.q2num').forEach(inp=>{
      total++; const want=q2Rows[+inp.dataset.i].value, got=parseNum(inp.value);
      if(got===want){inp.style.borderColor='#22c55e';correct++;}else{inp.style.borderColor='#ef4444';}
    });
    $('q2Fb').textContent=(correct===total)?'✅ All correct!':`Score: ${correct}/${total} — check highlights`;
    if(correct===total) confetti();
  });
  $('resetQ2').addEventListener('click',renderQ2);

  /* Order & Compare */
  const ascNums=[-5,3,-7,1,-3], ascAns=[-7,-5,-3,1,3];
  const descNums=[4,-7,-3,9,-8], descAns=[9,4,-3,-7,-8];
  const ascList=$('ascList'), descList=$('descList');
  function makeLi(v){const li=document.createElement('li');li.draggable=true;li.className='bg-white border rounded-xl px-4 py-2 text-lg flex justify-between items-center';
    li.innerHTML=`<span class="val">${v}</span><span class="cursor-move">⋮⋮</span>`; return li;}
  function renderOrder(){ascList.innerHTML='';descList.innerHTML='';
    ascNums.forEach(v=>ascList.appendChild(makeLi(v))); descNums.forEach(v=>descList.appendChild(makeLi(v)));
    makeSortable(ascList); makeSortable(descList);}
  function makeSortable(ul){let dragEl=null;
    ul.querySelectorAll('li').forEach(li=>{li.addEventListener('dragstart',()=>{dragEl=li;li.classList.add('dragging');});
      li.addEventListener('dragend',()=>{dragEl=null;li.classList.remove('dragging');});});
    ul.addEventListener('dragover',e=>{e.preventDefault();const els=[...ul.querySelectorAll('li:not(.dragging)')];let after=null,closest=-1e9;
      els.forEach(ch=>{const b=ch.getBoundingClientRect(), off=e.clientY-b.top-b.height/2; if(off<0&&off>closest){closest=off;after=ch;}});
      after?ul.insertBefore(dragEl,after):ul.appendChild(dragEl);});
  }
  renderOrder();
  $('checkOrder').addEventListener('click',()=>{
    const getVals=ul=>[...ul.querySelectorAll('.val')].map(s=>Number(s.textContent));
    const okAsc=JSON.stringify(getVals(ascList))===JSON.stringify(ascAns);
    const okDesc=JSON.stringify(getVals(descList))===JSON.stringify(descAns);
    $('orderFb').textContent=(okAsc&&okDesc)?'✅ Both orders correct':(!okAsc&&!okDesc?'❌ Both need fixes':(okAsc?'Ascending ✅, Descending ❌':'Ascending ❌, Descending ✅'));
    if(okAsc&&okDesc) confetti();
  });
  $('resetOrder').addEventListener('click',renderOrder);

  const cmpRight={a:'<',b:'>',c:'<'};
  [...document.querySelectorAll('.cmp')].forEach(btn=>{
    btn.addEventListener('click',()=>{const p=btn.dataset.pair,op=btn.dataset.op,ok=(cmpRight[p]===op);
      $('cmpFb').textContent=ok?'✅ Correct':'❌ Try again';
      $('cmpFb').className='mt-3 h-6 font-semibold '+(ok?'text-green-700':'text-red-700'); if(ok) confetti();});
  });

  /* Mini challenge */
  const poolSituations=[
    {t:'Winning by 2 points', v:+2},{t:'A loss of $75', v:-75},{t:'Temperature drops 6°C', v:-6},
    {t:'Temperature rises 4°C', v:+4},{t:'15 m below sea level', v:-15},{t:'20 m above sea level', v:+20},
    {t:'A withdrawal of $40', v:-40},{t:'A deposit of $90', v:+90},{t:'Clock is 5 min fast', v:+5},{t:'Clock is 2 min slow', v:-2}
  ];
  const mini=$('miniSituations');
  function newMiniSet(){mini.innerHTML='';const pick=poolSituations.slice().sort(()=>Math.random()-0.5).slice(0,5);
    pick.forEach(item=>{const row=document.createElement('div');row.className='card p-3';
      row.innerHTML=`<div>${item.t}</div>
        <div class="mt-2 flex items-center gap-2">
          <select class="signSel border rounded px-2 py-1" data-ans="${item.v>0?'+':'-'}">
            <option value="+">positive (+)</option><option value="-">negative (−)</option></select>
          <input class="magInput px-2 py-1 rounded border w-28" placeholder="magnitude" data-mag="${Math.abs(item.v)}">
        </div>`; mini.appendChild(row);});}
  newMiniSet();
  $('checkMini').addEventListener('click',()=>{let ok=true;
    mini.querySelectorAll('.signSel').forEach(sel=>{if(sel.value!==sel.dataset.ans){sel.style.borderColor='#ef4444';ok=false;}else sel.style.borderColor='#22c55e';});
    mini.querySelectorAll('.magInput').forEach(inp=>{if(Number(inp.value)!==Number(inp.dataset.mag)){inp.style.borderColor='#ef4444';ok=false;}else inp.style.borderColor='#22c55e';});
    $('miniFb').textContent=ok?'✅ Great job!':'❌ Recheck some entries';
    $('miniFb').className='mt-2 h-6 font-semibold '+(ok?'text-green-700':'text-red-700'); if(ok) confetti();});
  $('newMini').addEventListener('click',newMiniSet);

  show(0);
})();
</script>
</body>
</html>
