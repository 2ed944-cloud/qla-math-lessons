<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="description" content="Interactive mathematics lessons for Grade 7 and 8 students at Qatar Leadership Academy"/>
  <meta name="theme-color" content="#6C1D45"/>
  
  <!-- PWA Support -->
  <link rel="manifest" href="manifest.json"/>
  <link rel="apple-touch-icon" href="assets/qla_logo_192.png"/>
  
  <title>QLA Mathematics Portal | Qatar Leadership Academy</title>

  <!-- Preload critical assets -->
  <link rel="preload" href="https://cdn.tailwindcss.com" as="script"/>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Poppins:wght@600;800&display=swap" as="style"/>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Poppins:wght@600;800&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>

  <style>
    :root{
      --maroon:#6C1D45; --maroon2:#8B2450; --gold:#C7A34F; --gold2:#E4D4A8;
      --ink:#0F172A; --slate:#5b6572; --line:#e9eef2; --bg:#F7FAFC;
      --ok:#136f3a; --soon:#8a3d00; --progress:#3b82f6;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.5;scroll-behavior:smooth}

    /* HERO with improved accessibility */
    .hero{
      position:relative; color:#fff;
      background:
        linear-gradient(135deg, rgba(108,29,69,.88) 0%, rgba(139,36,80,.84) 45%, rgba(108,29,69,.88) 100%),
        url('assets/qla_banner.png') center/cover no-repeat;
      overflow:hidden;
    }
    .hero::before{
      content:""; position:absolute; inset:-40% -40% auto auto;
      width:200%; height:200%;
      background:radial-gradient(circle, rgba(199,163,79,.22) 0%, transparent 70%);
      animation:float 22s ease-in-out infinite; pointer-events:none;
    }
    @keyframes float{0%,100%{transform:translate(0,0) rotate(0)} 33%{transform:translate(30px,-30px) rotate(120deg)} 66%{transform:translate(-20px,20px) rotate(240deg)}}
    @media (prefers-reduced-motion: reduce){ .hero::before{animation:none} }

    .logo-tile{
      background:#fff; border:1px solid var(--line); border-radius:16px;
      padding:8px 10px; display:inline-flex; align-items:center; justify-content:center;
      box-shadow:0 10px 24px rgba(0,0,0,.08)
    }
    .logo-crisp{height:60px;width:auto;image-rendering:auto}
    @media (min-width:1024px){ .logo-crisp{height:68px} }

    /* Enhanced tabs with better touch targets */
    .tabs{ display:flex; gap:10px; background:rgba(255,255,255,.14); border:1px solid rgba(255,255,255,.35); border-radius:14px; padding:6px }
    .tab{ flex:1; padding:12px 16px; border-radius:10px; border:1px solid rgba(255,255,255,.35); color:#fff; background:transparent; cursor:pointer; font-weight:800; transition:all .2s ease; min-height:44px}
    .tab:hover{ background:rgba(255,255,255,.1) }
    .tab:focus{ outline:2px solid var(--gold); outline-offset:2px }
    .tab[aria-selected="true"]{ background:linear-gradient(135deg,var(--gold),var(--gold2)); color:var(--maroon) }

    /* Improved cards with better hover states */
    .card{ background:#fff; border:1px solid var(--line); border-radius:18px; }
    .row{ 
      border:1px solid var(--line); border-radius:12px; padding:12px 14px;
      display:flex; align-items:center; justify-content:space-between; gap:12px; background:#fff;
      transition:transform .2s ease, box-shadow .2s ease; min-height:56px
    }
    .row:hover:not(.disabled){ transform:translateX(4px); box-shadow:0 12px 28px rgba(0,0,0,.06); cursor:pointer }
    .row:focus-within{ outline:2px solid var(--gold); outline-offset:2px }
    .row.disabled{ opacity:.6; cursor:not-allowed }
    
    .status{font-size:11px; padding:6px 12px; border-radius:999px; border:1px solid transparent; text-transform:uppercase; letter-spacing:.3px; font-weight:700}
    .open{ background:rgba(19,111,58,.1); color:var(--ok); border-color:rgba(19,111,58,.25) }
    .soon{ background:rgba(186,91,8,.08); color:var(--soon); border-color:rgba(186,91,8,.25) }
    .checking{ background:rgba(59,130,246,.1); color:var(--progress); border-color:rgba(59,130,246,.25) }

    .kbd{ font-variant-numeric:tabular-nums; font-weight:700; padding:.1rem .35rem; border-radius:.4rem; border:1px solid #d1d5db; background:#fff }

    /* Progress indicators */
    .progress-ring{position:relative; width:48px; height:48px}
    .progress-ring circle{
      fill:none; stroke-width:4;
      transform-origin:center; transform:rotate(-90deg);
      transition:stroke-dashoffset .3s ease
    }
    .progress-ring .bg{stroke:#e5e7eb}
    .progress-ring .fg{stroke:var(--ok)}

    /* Stats cards */
    .stat-card{
      background:linear-gradient(135deg, rgba(108,29,69,.05), rgba(199,163,79,.05));
      border:1px solid var(--line); border-radius:12px; padding:16px;
      display:flex; align-items:center; gap:12px
    }
    .stat-icon{
      width:48px; height:48px; border-radius:12px;
      display:grid; place-items:center; font-size:20px
    }

    /* Loading skeleton */
    @keyframes shimmer{ 0%{background-position:200% 0} 100%{background-position:-200% 0} }
    .skeleton{
      background:linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size:200% 100%; animation:shimmer 1.5s infinite
    }

    /* Toast notifications */
    .toast{
      position:fixed; bottom:20px; right:20px; z-index:1000;
      background:#fff; border:1px solid var(--line); border-radius:12px;
      padding:16px; box-shadow:0 12px 28px rgba(0,0,0,.15);
      transform:translateY(100px); opacity:0;
      transition:all .3s ease; max-width:400px
    }
    .toast.show{ transform:translateY(0); opacity:1 }
    .toast.success{ border-left:4px solid var(--ok) }
    .toast.error{ border-left:4px solid #dc2626 }
    .toast.info{ border-left:4px solid var(--progress) }

    /* Improved search */
    .search-container{position:relative}
    .search-results{
      position:absolute; top:100%; left:0; right:0; margin-top:8px;
      background:#fff; border:1px solid var(--line); border-radius:12px;
      box-shadow:0 12px 28px rgba(0,0,0,.1); max-height:400px; overflow-y:auto;
      display:none; z-index:100
    }
    .search-results.show{ display:block }
    .search-result{
      padding:12px 16px; border-bottom:1px solid var(--line); cursor:pointer;
      transition:background .2s ease
    }
    .search-result:hover{ background:rgba(108,29,69,.05) }
    .search-result:last-child{ border-bottom:none }

    /* Bookmark indicator */
    .bookmarked{ position:relative }
    .bookmarked::after{
      content:"★"; position:absolute; top:-4px; right:-4px;
      color:var(--gold); font-size:18px; text-shadow:0 2px 4px rgba(0,0,0,.2)
    }

    /* Print styles */
    @media print{
      .hero, .tabs, .search-container, footer{ display:none }
      .card{ break-inside:avoid }
    }
  </style>
</head>
<body>

  <!-- Skip to main content link for accessibility -->
  <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:bg-white focus:px-4 focus:py-2 focus:rounded">
    Skip to main content
  </a>

  <!-- HERO -->
  <header class="hero shadow-2xl" role="banner">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
      <div class="flex items-center justify-between py-6">
        <div class="flex items-center gap-4">
          <span class="logo-tile" role="img" aria-label="QLA Logo">
            <img src="assets/qla_logo.svg" onerror="this.onerror=null;this.src='assets/qla_logo.png'" alt="" class="logo-crisp"/>
          </span>
          <div>
            <h1 class="text-4xl lg:text-5xl font-extrabold tracking-tight" style="font-family:Poppins,Inter,sans-serif">Mathematics Portal</h1>
            <p class="text-sm opacity-90 mt-1">Qatar Leadership Academy • Qatar Foundation</p>
          </div>
        </div>
        
        <!-- Install PWA button -->
        <button id="installBtn" class="hidden lg:flex items-center gap-2 bg-white/10 backdrop-blur rounded-xl px-4 py-2 hover:bg-white/20 transition" aria-label="Install app">
          <i class="fas fa-download"></i>
          <span class="text-sm">Install App</span>
        </button>
      </div>

      <div class="pb-6 flex flex-wrap items-center gap-4">
        <div class="tabs" role="tablist" aria-label="Grade selection">
          <button id="tab7" role="tab" class="tab" aria-selected="true" aria-controls="panel7">
            <i class="fas fa-graduation-cap" aria-hidden="true"></i> Grade 7
          </button>
          <button id="tab8" role="tab" class="tab" aria-selected="false" aria-controls="panel8">
            <i class="fas fa-graduation-cap" aria-hidden="true"></i> Grade 8
          </button>
        </div>
        
        <div class="ml-auto hidden sm:flex items-center gap-4 bg-white/10 backdrop-blur rounded-2xl px-4 py-2">
          <div class="flex items-center gap-2" role="img" aria-label="Press forward slash to search">
            <span class="kbd">/</span><span class="text-xs">Search</span>
          </div>
          <div class="flex items-center gap-2" role="img" aria-label="Press G to switch grade">
            <span class="kbd">G</span><span class="text-xs">Switch</span>
          </div>
          <div class="flex items-center gap-2" role="img" aria-label="Press B to view bookmarks">
            <span class="kbd">B</span><span class="text-xs">Bookmarks</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main id="main-content" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

    <!-- Progress Overview -->
    <section class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4 mb-8" aria-label="Learning progress overview">
      <div class="stat-card">
        <div class="stat-icon bg-[--maroon]/10 text-[--maroon]">
          <i class="fas fa-book-open"></i>
        </div>
        <div>
          <div class="text-2xl font-bold" id="totalLessons">0</div>
          <div class="text-sm text-slate-600">Total Lessons</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon bg-[--ok]/10 text-[--ok]">
          <i class="fas fa-check-circle"></i>
        </div>
        <div>
          <div class="text-2xl font-bold" id="completedLessons">0</div>
          <div class="text-sm text-slate-600">Completed</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon bg-[--progress]/10 text-[--progress]">
          <i class="fas fa-clock"></i>
        </div>
        <div>
          <div class="text-2xl font-bold" id="inProgressLessons">0</div>
          <div class="text-sm text-slate-600">In Progress</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon bg-[--gold]/10 text-[--gold]">
          <i class="fas fa-star"></i>
        </div>
        <div>
          <div class="text-2xl font-bold" id="bookmarkedLessons">0</div>
          <div class="text-sm text-slate-600">Bookmarked</div>
        </div>
      </div>
    </section>

    <!-- Teachers -->
    <section class="grid gap-6 md:grid-cols-2 mb-6" aria-labelledby="teachers-heading">
      <h2 id="teachers-heading" class="sr-only">Your Teachers</h2>
      
      <!-- Teacher 1 -->
      <article class="card p-5">
        <div class="flex items-start gap-4">
          <img src="assets/teacher_photo.jpg" alt="Photo of Mr. Mohammad Abu Ghuwaleh"
               class="w-16 h-16 rounded-lg object-cover border border-[--line]"
               loading="lazy"/>
          <div>
            <h3 class="font-extrabold">Mr. Mohammad Abu Ghuwaleh</h3>
            <div class="text-sm text-white bg-[--maroon] inline-block px-2 py-0.5 rounded mt-1">Room 02</div>
            <div class="text-sm mt-2">
              <a class="underline decoration-dotted hover:text-[--maroon]" href="mailto:2ed944@qla.qfschools.qa">
                2ed944@qla.qfschools.qa
              </a>
            </div>
          </div>
        </div>

        <nav class="mt-4 grid gap-2" aria-label="Mr. Mohammad's lessons">
          <a class="row" href="grade7/welcome.html">
            <span>Grade 7 — Welcome & Orientation</span>
            <span class="status open">Open</span>
          </a>
          <a class="row" href="grade8/welcome.html">
            <span>Grade 8 — Welcome & Orientation</span>
            <span class="status open">Open</span>
          </a>
        </nav>
      </article>

      <!-- Teacher 2 -->
      <article class="card p-5">
        <div class="flex items-start gap-4">
          <img src="assets/teacher_parallel.jpg" alt="Photo of Mr. Nizar Bani Omar"
               class="w-16 h-16 rounded-lg object-cover border border-[--line]"
               loading="lazy"/>
          <div>
            <h3 class="font-extrabold">Mr. Nizar Bani Omar</h3>
            <div class="text-sm text-white bg-[--maroon] inline-block px-2 py-0.5 rounded mt-1">Room 09</div>
            <div class="text-sm mt-2">
              <a class="underline decoration-dotted hover:text-[--maroon]" href="mailto:2hg662@qla.qfschools.qa">
                2hg662@qla.qfschools.qa
              </a>
            </div>
          </div>
        </div>

        <nav class="mt-4 grid gap-2" aria-label="Mr. Nizar's lessons">
          <a class="row" href="grade7/welcome_Nizar.html">
            <span>Grade 7 — Welcome & Orientation</span>
            <span class="status open">Open</span>
          </a>
          <a class="row" href="grade8/welcome_Nizar.html">
            <span>Grade 8 — Welcome & Orientation</span>
            <span class="status open">Open</span>
          </a>
        </nav>
      </article>
    </section>

    <!-- Search -->
    <section class="card p-5 mb-6 search-container" role="search" aria-labelledby="search-heading">
      <label class="block text-sm font-semibold text-slate-700 mb-1" for="q" id="search-heading">
        Search lessons (title, keywords)…
      </label>
      <div class="relative">
        <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" aria-hidden="true"></i>
        <input id="q" type="search"
               placeholder="e.g., Fractions, BIDMAS, Pythagoras, Geometry"
               class="w-full rounded-xl border border-[--line] pl-10 pr-3 py-2
                      focus:outline-none focus:border-[--gold] focus:ring-2 focus:ring-[--gold]/20"
               autocomplete="off"
               aria-describedby="search-tip"/>
      </div>
      <p class="text-xs text-slate-500 mt-1" id="search-tip">
        Tip: press <span class="kbd">/</span> to focus; <span class="kbd">Esc</span> to clear; <span class="kbd">B</span> to filter bookmarks.
      </p>
      
      <!-- Search results dropdown -->
      <div class="search-results" id="searchResults" role="listbox"></div>
    </section>
    
    <!-- Panels -->
    <section id="panel7" role="tabpanel" aria-labelledby="tab7" aria-hidden="false">
      <div class="card p-4 mb-4">
        <div class="flex items-center gap-3">
          <div class="rounded-xl bg-[--maroon] text-white w-11 h-11 grid place-items-center shadow" aria-hidden="true">
            <i class="fas fa-flag"></i>
          </div>
          <div class="flex-1">
            <h2 class="font-extrabold text-lg">Lesson 1 — Welcome & Orientation</h2>
            <p class="text-sm text-slate-600">Course overview • Expectations • Digital tools</p>
          </div>
          <a class="status open" href="grade7/welcome.html" aria-label="Open Welcome and Orientation lesson">Open</a>
        </div>
      </div>
      <div id="g7-units"></div>
    </section>

    <section id="panel8" role="tabpanel" aria-labelledby="tab8" aria-hidden="true" class="hidden">
      <div class="card p-4 mb-4">
        <div class="flex items-center gap-3">
          <div class="rounded-xl bg-[--maroon] text-white w-11 h-11 grid place-items-center shadow" aria-hidden="true">
            <i class="fas fa-flag"></i>
          </div>
          <div class="flex-1">
            <h2 class="font-extrabold text-lg">Lesson 1 — Welcome & Orientation</h2>
            <p class="text-sm text-slate-600">Course overview • Expectations • Digital tools</p>
          </div>
          <a class="status open" href="grade8/welcome.html" aria-label="Open Welcome and Orientation lesson">Open</a>
        </div>
      </div>
      <div id="g8-units"></div>
    </section>

    <footer class="mt-12 mb-8 text-center text-sm text-slate-500" role="contentinfo">
      © <span id="year"></span> Qatar Leadership Academy — Member of Qatar Foundation • <strong>Created by Mohammad Abu Ghuwaleh</strong>
      <div class="mt-2 flex items-center justify-center gap-4 flex-wrap">
        <button id="resetProgress" class="hover:text-[--maroon] underline decoration-dotted">Reset Progress</button>
        <button id="exportData" class="hover:text-[--maroon] underline decoration-dotted">Export Data</button>
        <a href="#" class="hover:text-[--maroon]">Privacy</a>
        <a href="#" class="hover:text-[--maroon]">Feedback</a>
      </div>
    </footer>
  </main>

  <!-- Toast container -->
  <div id="toastContainer" aria-live="polite" aria-atomic="true"></div>

  <script src="js/portal.js"></script>
</body>
</html>
